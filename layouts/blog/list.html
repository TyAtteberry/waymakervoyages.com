{{define "main"}}
<section id="blog-list" class="blog-list section">
  <div class="container section-title" data-aos="fade-up">
    <h2>Latest Blog Posts</h2>
    <p>Discover our insights on sailing adventures and travel tips</p>
  </div>

  <div class="container" data-aos="fade-up" data-aos-delay="100">
    <div class="row">
      {{ $paginator := .Paginator 6 }}
      {{ range $index, $page := $paginator.Pages }}
      <div class="col-lg-6 mb-5" data-aos="fade-up" data-aos-delay="{{ add 200 (mul $index 100) }}">
        <article class="blog-post-card h-100 shadow-sm rounded-4 overflow-hidden border-0 clickable-card" data-href="{{ $page.RelPermalink }}">
          <div class="post-img position-relative">
            <img src="{{ $page.Params.image | default "/assets/img/blog-default.jpg" }}" alt="{{ $page.Title }}" class="img-fluid w-100" style="height: 250px; object-fit: cover;">
            <div class="post-category-badge position-absolute top-0 start-0 m-3">
              <a href="/blog/?category={{ $page.Params.category | default "uncategorized" | urlize }}" class="badge bg-primary bg-opacity-75 text-white px-3 py-2 fs-6 text-decoration-none text-reset" onclick="event.stopPropagation();">{{ $page.Params.category | default "Uncategorized" }}</a>
            </div>
          </div>
          
          <div class="post-content p-4">
            <div class="post-meta mb-2">
              <ul class="post-meta-list d-flex align-items-center list-unstyled">
                <li class="post-date d-flex align-items-center me-3">
                  <i class="bi bi-calendar3 text-muted me-1"></i>
                  <time datetime="{{ $page.Date.Format "2006-01-02T15:04:05Z07:00" }}" class="text-muted small">
                    {{ $page.Date.Format "January 2, 2006" }}
                  </time>
                </li>
                <li class="post-author d-flex align-items-center">
                  <i class="bi bi-person text-muted me-1"></i>
                  <a href="/blog/?author={{ $page.Params.author | default "admin" | urlize }}" class="text-muted small text-decoration-none" onclick="event.stopPropagation();">{{ $page.Params.author | default "Admin" }}</a>
                </li>
              </ul>
            </div>
            
            <h3 class="post-title h4 mb-3">
              <a href="{{ $page.RelPermalink }}" class="text-decoration-none text-dark" onclick="event.stopPropagation();">{{ $page.Title }}</a>
            </h3>
            
            <p class="post-excerpt text-muted mb-3">{{ $page.Summary | plainify | htmlUnescape | truncate 120 }}</p>
            
            <div class="read-more">
              <a href="{{ $page.RelPermalink }}" class="text-decoration-none fw-medium" onclick="event.stopPropagation();">
                Read More 
                <i class="bi bi-arrow-right ms-1"></i>
              </a>
            </div>
          </div>
        </article>
      </div>
      {{ end }}
    </div>
    
    {{ if $paginator.HasPrev }}{{ if $paginator.HasNext }}
    <div class="d-flex justify-content-center mt-5">
      <nav aria-label="Blog pagination">
        <ul class="pagination">
          {{ if $paginator.HasPrev }}
          <li class="page-item">
            <a class="page-link" href="{{ $paginator.Prev.URL }}" aria-label="Previous">
              <i class="bi bi-chevron-left"></i>
            </a>
          </li>
          {{ end }}
          
          {{ range $paginator.Pagers }}
          {{ if eq . $paginator }}
          <li class="page-item active">
            <span class="page-link">{{ .PageNumber }}</span>
          </li>
          {{ else }}
          <li class="page-item">
            <a class="page-link" href="{{ .URL }}">{{ .PageNumber }}</a>
          </li>
          {{ end }}
          {{ end }}
          
          {{ if $paginator.HasNext }}
          <li class="page-item">
            <a class="page-link" href="{{ $paginator.Next.URL }}" aria-label="Next">
              <i class="bi bi-chevron-right"></i>
            </a>
          </li>
          {{ end }}
        </ul>
      </nav>
    </div>
    {{ end }}{{ end }}
  </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // Add click handlers to all clickable cards
  document.querySelectorAll('.clickable-card').forEach(card => {
    card.addEventListener('click', function(e) {
      // Don't trigger if clicking on links or buttons
      if (e.target.tagName === 'A' || e.target.tagName === 'BUTTON' || e.target.closest('a') || e.target.closest('button')) {
        return;
      }
      window.location.href = this.dataset.href;
    });
    
    // Add hover effect
    card.style.cursor = 'pointer';
    card.addEventListener('mouseenter', function() {
      this.style.transform = 'translateY(-5px)';
      this.style.boxShadow = '0 10px 20px rgba(0,0,0,0.15)';
      this.style.transition = 'all 0.3s ease';
    });
    
    card.addEventListener('mouseleave', function() {
      this.style.transform = 'translateY(0)';
      this.style.boxShadow = '0 2px 10px rgba(0,0,0,0.1)';
    });
  });
});
</script>
{{end}}